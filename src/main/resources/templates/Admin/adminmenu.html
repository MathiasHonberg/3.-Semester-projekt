<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>

    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <link th:href="@{/webjars/bootstrap/3.3.7/css/bootstrap.min.css}" rel="stylesheet" media="screen"/>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">

</head>

<body>
<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">




<div class="container">
    <h1 class="page-header">Home page News</h1>

    <form class="md-form" th:action="@{/uploadimage}" enctype="multipart/form-data" method="POST">
        <div class="file-field">
            <div class="btn btn-primary btn-sm float-left">
                <span>Choose Image (Max size 1MB)</span>
                <br>
                <input type="file" name="fileName" id="i_file">
                <button class="btn btn-primary" type="submit" id="i_submit">Submit</button>

            </div>
            <div class="file-path-wrapper">

            </div>
        </div>
    </form>
    <br>
    <br>
    <br>
    <br>
    <br>

    <table class="table table-striped table-bordered table-hover">
        <thead>
        <tr>

            <th>Id</th>
            <th>Image</th>
            <th>Delete</th>

        </tr>
        </thead>
        <tbody>
        <tr th:each="fetchAllNews: ${fetchAllNews}">

            <td th:text="${fetchAllNews.id}"/>
            <td><img th:src="${fetchAllNews.image}" style="width:20%"></img></td>
            <td>

                <a class="glyphicon glyphicon-remove" th:href="${'delete/specificnews/' + fetchAllNews.id}" onclick="return confirmDelete()">
                    <!--<button class="btn btn-info glyphicon glyphicon-cog">details</button>-->

                </a>
            </td>
        </tr>

        </tbody>
    </table>

    <div>
        <h1>Kontakt</h1>
        <a href="/admincontact">
            <button class="btn btn-primary">Administrer Kontakt</button>
        </a>

    </div>


</div>


<script>
    $('#i_submit').click( function() {
        //check whether browser fully supports all File API
        if (window.File && window.FileReader && window.FileList && window.Blob)
        {
            //get the file size and file type from file input field
            var fsize = $('#i_file')[0].files[0].size;
            var ftype = $('#i_file')[0].files[0].type;

            switch(ftype)
            {
                case 'image/png':
                case 'image/gif':
                case 'image/jpeg':
                case 'image/pjpeg':
                    break;
                default:
                    alert('Unsupported File!');
                    event.preventDefault();
            }

            if(fsize>1048576) //do something if file size more than 1 mb (1048576)
            {
                var new_num = fsize.toFixed(1)/1000000;
                var imageSize = new_num.toFixed(1)
                alert(imageSize +" MB\nImage Size must be below 1MB!");
                event.preventDefault();
            }
        }else{
            alert("Please upgrade your browser, because your current browser lacks some new features we need!");
        }
    });

    function confirmDelete() {
        if (confirm("Delete Image?") == true) {
            return true;
        } else {
            return false;
        }
    }

</script>


</body>
</html>